angular.module("app",["ngRoute","LocalStorageModule","uiGmapgoogle-maps"]),angular.module("app").controller("ApplicationCtrl",["$scope","USER_ROLES","UserSvc","$location","$window","localStorageService",function(t,e,n,o,r,a){t.currentUser=a.get("currentUser"),t.userRoles=e,t.isAuthorized=n.isAuthorized,t.setCurrentUser=function(e){a.set("currentUser",e),t.currentUser=a.get("currentUser")},t.$on("flash",function(e,n){t.err=n}),t.logout=function(){t.currentUser=null,n.logout(),delete r.sessionStorage.token,a.remove("currentUser"),o.path("/")}}]).factory("authInterceptor",["$rootScope","$q","$window",function(t,e,n){return{request:function(t){return t.headers=t.headers||{},n.sessionStorage.token&&(t.headers.Authorization=n.sessionStorage.token),t},response:function(t){return 401===t.status,t||e.when(t)}}}]).config(["$httpProvider","localStorageServiceProvider",function(t,e){t.interceptors.push("authInterceptor"),e.setStorageType("sessionStorage")}]),angular.module("app").constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout",notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized"}).constant("USER_ROLES",{all:"*",admin:"admin",user:"user",guest:"guest"}),angular.module("app").controller("CheckoutCtrl",["$scope","OrderSvc","$location","OrderFactory","localStorageService",function(t,e,n,o,r){t.save="",t.saveD="",e.fetchOne(o.get()).success(function(n){r.set("currentOrder",n),t.order=r.get("currentOrder");var o=.9*parseInt(t.order.cashtotal);o=parseInt(o);var a=parseInt(t.order.cashtotal),s=4*(a-o);t.discount=s,e.fetchUser(t.order.useraccount).success(function(e){t.user=e})}).error(function(t){r.set("currentOrder",null),n.path("/order")}),t.showDiscount=!1,t.showCash=!0,t.showText="折扣",t.changeD=0,t.now=function(){t.showDiscount=!t.showDiscount,t.showCash=!t.showCash,t.showText=t.showCash?"折扣":"現金",t.order.cashtotal=t.order.cashtotal-t.changeD},t.add=function(e){if(-1===e)if(1===t.save.length)t.save="";else{var n=t.save.substr(0,t.save.length-1);t.save=n}else t.save=t.save+""+e;t.change=parseInt(t.save-t.order.cashtotal),"0"===t.save.charAt(0)&&(t.save=""),0===t.save.length&&(t.change="")},t.addD=function(e){if(-1===e)if(1===t.saveD.length)t.saveD="";else{var n=t.saveD.substr(0,t.saveD.length-1);t.saveD=n}else t.saveD=t.saveD+""+e;t.changeD=parseInt(t.saveD/4),"0"===t.saveD.charAt(0)&&(t.saveD=""),0===t.saveD.length&&(t.changeD="")}}]),angular.module("app").controller("CompleteCtrl",["$scope","CompleteSvc",function(t,e){e.fetchPersonalOrder(t.currentUser.useraccount).success(function(e){for(v in e)t.personalOrder=e[v];currTime=new Date(t.personalOrder.date),b=30,currTime.setMinutes(currTime.getMinutes()+b,currTime.getSeconds(),0),t.timePlus=currTime}).error(function(t){$location.path("/")})}]),angular.module("app").service("CompleteSvc",["$http",function(t){var e=this;e.fetchPersonalOrder=function(e){return t.get("/api/personal_order/"+e)}}]),angular.module("app").controller("ListCtrl",["$scope","$location","OrderSvc","MenuFactory",function(t,e,n,o){function r(){a(t.cart)&&e.path("/menu")}function a(t){return Object.keys(t).length?!1:!0}t.cart=o.get(),r(),t.order=function(){n.order(t.currentUser.useraccount,t.currentUser.username,t.cart,t.totalPrice(),t.mark),e.path("/complete")},t.totalPrice=function(){var e=0;return angular.forEach(t.cart,function(t){e+=t.price*t.quantity}),e},t.totalQuantity=function(){var e=0;return angular.forEach(t.cart,function(t){(""===t.quantity||null===t.quantity||t.quantity<0)&&(t.quantity=1),e+=parseInt(t.quantity)}),e};var s=function(e){return angular.forEach(t.cart,function(t,n){return t.id===e?void(index=n):void 0}),index};t.remove=function(e){var n=-1,n=s(e);if(angular.forEach(t.cart,function(t,o){t.id===e&&(n=o)}),-1!==n){var o=confirm("是否從購物車中移除該商品？");o&&t.cart.splice(n,1)}r()},t.removeAll=function(){var e=confirm("是否清空購物車？");e&&(t.cart=[]),r()},t.qadd=function(e){var n=-1,n=s(e);-1!==n&&(t.cart[n].quantity=parseInt(t.cart[n].quantity)+1)},t.qreduce=function(e){var n=-1,n=s(e);-1!==n&&(t.cart[n].quantity>1?t.cart[n].quantity=parseInt(t.cart[n].quantity)-1:t.remove(e))}}]),angular.module("app").controller("MenuCtrl",["$scope","$location","MenuSvc","MenuFactory",function(t,e,n,o){function r(t,e){for(var n in t)0!==parseInt(t[n].quantity)&&e.unshift(t[n]);e.pop(),e.pop()}n.fetch().success(function(e){t.cart=e}),t.nextPage=function(){t.list=[{},{}],r(t.cart,t.list),o.set(t.list),e.path("/list")};var a=function(e){return angular.forEach(t.cart,function(t,n){return t.id===e?void(index=n):void 0}),index};t.qadd=function(e){var n=-1,n=a(e);-1!==n&&(t.cart[n].quantity=parseInt(t.cart[n].quantity)+1)},t.qreduce=function(e){var n=-1,n=a(e);-1!==n&&t.cart[n].quantity>0&&(t.cart[n].quantity=parseInt(t.cart[n].quantity)-1)}}]).factory("MenuFactory",function(){function t(t){n=t}function e(){return n}var n={};return{set:t,get:e}}),angular.module("app").service("MenuSvc",["$http",function(t){var e=this;e.upload=function(e,n,o){new FormData;return t.post("/api/menu",{file:e,name:n,price:o})},e.fetch=function(){return t.get("/api/menu")}}]),angular.module("app").controller("OrderCtrl",["$scope","OrderSvc","$location","OrderFactory",function(t,e,n,o){t.checkout=function(t){o.set(t),n.path("/checkout")},e.fetch().success(function(e){t.orders=e}),t.$on("ws:new_order",function(e,n){t.$apply(function(){t.orders.push(n)})})}]).factory("OrderFactory",function(){function t(t){n=t}function e(){return n}var n={};return{set:t,get:e}}),angular.module("app").service("OrderSvc",["$http",function(t){var e=this;e.order=function(e,n,o,r,a){return t.post("/api/order",{headers:{"Content-type":"application/json"},useraccount:e,username:n,order:o,cashtotal:r,mark:a})},e.fetch=function(){return t.get("/api/order")},e.fetchOne=function(e){return t.get("/api/checkout/"+e)},e.fetchUser=function(e){return t.post("/api/checkout",{headers:{"Content-type":"application/json"},useraccount:e})}}]),angular.module("app").controller("personalCtrl",["$scope","PersonalSVC",function(t,e){function n(){var e,n,o=0;t.date=new Array,t.mongoDate=[],t.mongoLat=[],t.mongoLon=[];for(v in t.positions)e=new Date(t.positions[o].date),e=e.toDateString(),n=new Date(t.positions[v].date),n=n.toDateString(),n!=e&&(t.date.unshift(e),t.mongoDate.unshift(t.positions[o].date),t.mongoLat.unshift(t.positions[o].latitude),t.mongoLon.unshift(t.positions[o].longitude),o=v,e=new Date(t.positions[o].date),e=e.toDateString());e=new Date(t.positions[o].date),t.date.unshift(e),t.mongoDate.unshift(t.positions[o].date),t.mongoLat.unshift(t.positions[o].latitude),t.mongoLon.unshift(t.positions[o].longitude)}e.ftechHistoryPosition(t.currentUser.useraccount).success(function(e){t.positions=e,n()}).error(function(t){}),e.ftechHistoryOrder(t.currentUser.useraccount).success(function(e){t.orders=e}).error(function(t){}),t.showPoint=!1,t.showOrder=!1,t.showHistoryPoint=function(){t.showPoint=!t.showPoint,t.showOrder=!1},t.showHistoryOrder=function(){t.showOrder=!t.showOrder,t.showPoint=!1},t.change=function(e){var n,o;t.map.center={latitude:t.mongoLat[e],longitude:t.mongoLon[e]},t.polylines[0].path=[],n=new Date(t.mongoDate[e]),n=n.toDateString();for(v in t.positions)if(o=new Date(t.positions[v].date),o=o.toDateString(),o==n){var r=[{latitude:t.positions[v].latitude,longitude:t.positions[v].longitude}];t.polylines[0].path.unshift(r[0])}},t.map={center:{latitude:25.086557,longitude:121.565488},zoom:17,bounds:{}},t.polylines=[{id:1,path:[{latitude:25.086518,longitude:121.56404},{latitude:25.086557,longitude:121.565488}],stroke:{color:"#6060FB",weight:3},editable:!0,draggable:!0,geodesic:!0,visible:!0,icons:[{icon:{path:google.maps.SymbolPath.BACKWARD_OPEN_ARROW},offset:"25px",repeat:"50px"}]}]}]),angular.module("app").service("PersonalSVC",["$http",function(t){var e=this;e.ftechHistoryPosition=function(e){return t.get("/api/history_position/"+e)},e.ftechHistoryOrder=function(e){return t.get("/api/history_order/"+e)}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc","localStorageService",function(t,e,n){t.addPost=function(){t.postBody&&e.create({username:n.get("currentUser").username,body:t.postBody}).success(function(e){t.postBody=null})},e.fetch().success(function(e){t.posts=e}),t.$on("ws:new_post",function(e,n){t.$apply(function(){t.posts.unshift(n)})})}]),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(e){return t.post("/api/posts",e)}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{controller:"",templateUrl:"carbonfootprint.html"}).when("/register",{controller:"UserCtrl",templateUrl:"register.html"}).when("/login",{controller:"UserCtrl",templateUrl:"login.html"}).when("/posts",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/menu",{controller:"MenuCtrl",templateUrl:"menu.html"}).when("/menulist",{controller:"MenuCtrl",templateUrl:"menulist.html"}).when("/list",{controller:"ListCtrl",templateUrl:"list.html"}).when("/personal",{controller:"personalCtrl",templateUrl:"personal.html"}).when("/edit",{controller:"UploadCtrl",templateUrl:"edit.html"}).when("/order",{controller:"OrderCtrl",templateUrl:"order.html"}).when("/checkout",{controller:"CheckoutCtrl",templateUrl:"checkout.html"}).when("/complete",{controller:"CompleteCtrl",templateUrl:"complete.html"}).otherwise({redirectTo:"/"}),e.html5Mode(!0)}]),angular.module("app").controller("UploadCtrl",["$scope","MenuSvc","$location",function(t,e,n){t.upload=function(n,o){var r=t.image;e.upload(r,n,o)}}]).directive("fileModel",["$parse",function(t){return{restrict:"A",link:function(e,n,o){var r=t(o.fileModel),a=r.assign;n.bind("change",function(){e.$apply(function(){a(e,n[0].files[0])})})}}}]),angular.module("app").controller("UserCtrl",["$scope","$rootScope","AUTH_EVENTS","$location","UserSvc",function(t,e,n,o,r){t.login=function(a,s){r.login(a,s).then(function(r){e.$broadcast(n.loginSuccess),t.setCurrentUser(r.data),o.path("/")})},t.checkbox_checked=0,t.passwordck="",t.register=function(e,n,o,a,s,c,i,u){r.createUser(e,n,o,a,s,c,i,u).error(function(e){t.$emit("flash",e)}).success(function(){t.login(n,o)})}}]).directive("passwordMatch",[function(){return{restrict:"A",scope:!0,require:"ngModel",link:function(t,e,n,o){var r=function(){var e=t.$eval(n.ngModel),o=t.$eval(n.passwordMatch);return e==o};t.$watch(r,function(t){o.$setValidity("unique",t)})}}}]),angular.module("app").service("UserSvc",["$http","$window","localStorageService",function(t,e,n){var o=this;o.getUser=function(){return t.get("/api/users")},o.login=function(n,r){return t.post("/api/sessions",{useraccount:n,password:r}).then(function(n){return o.token=n.data,t.defaults.headers.common.Authorization=n.data,e.sessionStorage.token=n.data,o.getUser()})},o.logout=function(){t.defaults.headers.common.Authorization=""},o.createUser=function(e,n,r,a,s,c,i,u){return t.post("/api/users",{username:e,useraccount:n,password:r,sex:a,phone:s,email:c,address:i,born:u}).success(function(t){}).error(function(t){return o.err=t,o.err})},o.isAuthenticated=function(){return!!n.get("currentUser")},o.isAuthorized=function(t){return angular.isArray(t)||(t=[t]),o.isAuthenticated()&&-1!==t.indexOf(n.get("currentUser").auth)}}]),angular.module("app").run(["$rootScope",function(t){var e="wss://localhost:3011",n=new WebSocket(e);n.onopen=function(){console.log("WebSocket connected")},n.onmessage=function(e){console.log(e);var n=JSON.parse(e.data);t.$broadcast("ws:"+n.topic,n.data)}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJhdXRoX2V2ZW50cy5qcyIsImNoZWNrb3V0LmN0cmwuanMiLCJjb21wbGV0ZS5jdHJsLmpzIiwiY29tcGxldGUuc3ZjLmpzIiwibGlzdC5jdHJsLmpzIiwibWVudS5jdHJsLmpzIiwibWVudS5zdmMuanMiLCJvcmRlci5jdHJsLmpzIiwib3JkZXIuc3ZjLmpzIiwicGVyc29uYWwuY3RybC5qcyIsInBlcnNvbmFsLnN2Yy5qcyIsInBvc3RzLmN0cmwuanMiLCJwb3N0cy5zdmMuanMiLCJyb3V0ZXMuanMiLCJ1cGxvYWQuY3RybC5qcyIsInVzZXIuY3RybC5qcyIsInVzZXIuc3ZjLmpzIiwid2Vic29ja2V0cy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIlVTRVJfUk9MRVMiLCJVc2VyU3ZjIiwiJGxvY2F0aW9uIiwiJHdpbmRvdyIsImxvY2FsU3RvcmFnZVNlcnZpY2UiLCJjdXJyZW50VXNlciIsImdldCIsInVzZXJSb2xlcyIsImlzQXV0aG9yaXplZCIsInNldEN1cnJlbnRVc2VyIiwidXNlciIsInNldCIsIiRvbiIsIl8iLCJtZXNzYWdlIiwiZXJyIiwibG9nb3V0Iiwic2Vzc2lvblN0b3JhZ2UiLCJ0b2tlbiIsInJlbW92ZSIsInBhdGgiLCJmYWN0b3J5IiwiJHJvb3RTY29wZSIsIiRxIiwicmVxdWVzdCIsImNvbmZpZyIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJ3aGVuIiwiJGh0dHBQcm92aWRlciIsImxvY2FsU3RvcmFnZVNlcnZpY2VQcm92aWRlciIsImludGVyY2VwdG9ycyIsInB1c2giLCJzZXRTdG9yYWdlVHlwZSIsImNvbnN0YW50IiwibG9naW5TdWNjZXNzIiwibG9naW5GYWlsZWQiLCJsb2dvdXRTdWNjZXNzIiwic2Vzc2lvblRpbWVvdXQiLCJub3RBdXRoZW50aWNhdGVkIiwibm90QXV0aG9yaXplZCIsImFsbCIsImFkbWluIiwiZ3Vlc3QiLCJPcmRlclN2YyIsIk9yZGVyRmFjdG9yeSIsInNhdmUiLCJzYXZlRCIsImZldGNoT25lIiwic3VjY2VzcyIsIm9yZGVyIiwiZGlzIiwicGFyc2VJbnQiLCJjYXNodG90YWwiLCJudW0iLCJjYW4iLCJkaXNjb3VudCIsImZldGNoVXNlciIsInVzZXJhY2NvdW50IiwiZXJyb3IiLCJzaG93RGlzY291bnQiLCJzaG93Q2FzaCIsInNob3dUZXh0IiwiY2hhbmdlRCIsIm5vdyIsImFkZCIsImxlbmd0aCIsInRlbXBfc3RyIiwic3Vic3RyIiwiY2hhbmdlIiwiY2hhckF0IiwiYWRkRCIsIkNvbXBsZXRlU3ZjIiwiZmV0Y2hQZXJzb25hbE9yZGVyIiwicGVyc29uYWxPcmRlciIsInYiLCJjdXJyVGltZSIsIkRhdGUiLCJkYXRlIiwiYiIsInNldE1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsInRpbWVQbHVzIiwic2VydmljZSIsIiRodHRwIiwic3ZjIiwidGhpcyIsIk1lbnVGYWN0b3J5IiwiY2hlY2tDYXJ0IiwiaXNFbXB0eU9iaiIsImNhcnQiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwidXNlcm5hbWUiLCJ0b3RhbFByaWNlIiwibWFyayIsInRvdGFsIiwiZm9yRWFjaCIsIml0ZW0iLCJwcmljZSIsInF1YW50aXR5IiwidG90YWxRdWFudGl0eSIsInRvdGFscSIsImZpbmRJbmRleCIsImlkIiwia2V5IiwiaW5kZXgiLCJyZXR1cm5rZXkiLCJjb25maXJtIiwic3BsaWNlIiwicmVtb3ZlQWxsIiwicWFkZCIsInFyZWR1Y2UiLCJNZW51U3ZjIiwiYWRkVG9MaXN0IiwibWVudXMiLCJsaXN0IiwidW5zaGlmdCIsInBvcCIsImZldGNoIiwibWVudSIsIm5leHRQYWdlIiwiZGF0YSIsInNhdmVkRGF0YSIsInVwbG9hZCIsImZpbGUiLCJuYW1lIiwiRm9ybURhdGEiLCJwb3N0IiwiY2hlY2tvdXQiLCJvcmRlcnMiLCIkYXBwbHkiLCJDb250ZW50LXR5cGUiLCJQZXJzb25hbFNWQyIsInNldERhdGUiLCJjdXJyRGF0ZSIsImN1cnJOZXh0RGF0ZSIsImkiLCJBcnJheSIsIm1vbmdvRGF0ZSIsIm1vbmdvTGF0IiwibW9uZ29Mb24iLCJwb3NpdGlvbnMiLCJ0b0RhdGVTdHJpbmciLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImZ0ZWNoSGlzdG9yeVBvc2l0aW9uIiwiZnRlY2hIaXN0b3J5T3JkZXIiLCJzaG93UG9pbnQiLCJzaG93T3JkZXIiLCJzaG93SGlzdG9yeVBvaW50Iiwic2hvd0hpc3RvcnlPcmRlciIsIm1hcCIsImNlbnRlciIsInBvbHlsaW5lcyIsInRlbXAiLCJ6b29tIiwiYm91bmRzIiwic3Ryb2tlIiwiY29sb3IiLCJ3ZWlnaHQiLCJlZGl0YWJsZSIsImRyYWdnYWJsZSIsImdlb2Rlc2ljIiwidmlzaWJsZSIsImljb25zIiwiaWNvbiIsImdvb2dsZSIsIm1hcHMiLCJTeW1ib2xQYXRoIiwiQkFDS1dBUkRfT1BFTl9BUlJPVyIsIm9mZnNldCIsInJlcGVhdCIsIlBvc3RzU3ZjIiwiYWRkUG9zdCIsInBvc3RCb2R5IiwiY3JlYXRlIiwiYm9keSIsInBvc3RzIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsInRlbXBsYXRlVXJsIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsImh0bWw1TW9kZSIsImltYWdlIiwiZGlyZWN0aXZlIiwiJHBhcnNlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiYmluZCIsImZpbGVzIiwiQVVUSF9FVkVOVFMiLCJsb2dpbiIsInBhc3N3b3JkIiwidGhlbiIsIiRicm9hZGNhc3QiLCJjaGVja2JveF9jaGVja2VkIiwicGFzc3dvcmRjayIsInJlZ2lzdGVyIiwic2V4IiwicGhvbmUiLCJlbWFpbCIsImFkZHJlc3MiLCJib3JuIiwiY3JlYXRlVXNlciIsIiRlbWl0IiwicmVxdWlyZSIsImVsZW0iLCJjb250cm9sIiwiY2hlY2tlciIsImUxIiwiJGV2YWwiLCJuZ01vZGVsIiwiZTIiLCJwYXNzd29yZE1hdGNoIiwiJHdhdGNoIiwibiIsIiRzZXRWYWxpZGl0eSIsImdldFVzZXIiLCJ2YWwiLCJkZWZhdWx0cyIsImNvbW1vbiIsImlzQXV0aGVudGljYXRlZCIsImF1dGhvcml6ZWRSb2xlcyIsImlzQXJyYXkiLCJpbmRleE9mIiwiYXV0aCIsInJ1biIsInVybCIsImNvbm5lY3Rpb24iLCJXZWJTb2NrZXQiLCJvbm9wZW4iLCJjb25zb2xlIiwibG9nIiwib25tZXNzYWdlIiwiZSIsInBheWxvYWQiLCJKU09OIiwicGFyc2UiLCJ0b3BpYyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxVQUNBLHFCQUNBLHNCQ0hBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FBQSxhQUFBLFVBQUEsWUFBQSxVQUFBLHNCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFMLEVBQUFNLFlBQUFELEVBQUFFLElBQUEsZUFDQVAsRUFBQVEsVUFBQVAsRUFDQUQsRUFBQVMsYUFBQVAsRUFBQU8sYUFFQVQsRUFBQVUsZUFBQSxTQUFBQyxHQUNBTixFQUFBTyxJQUFBLGNBQUFELEdBQ0FYLEVBQUFNLFlBQUFELEVBQUFFLElBQUEsZ0JBR0FQLEVBQUFhLElBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUNBZixFQUFBZ0IsSUFBQUQsSUFHQWYsRUFBQWlCLE9BQUEsV0FDQWpCLEVBQUFNLFlBQUEsS0FDQUosRUFBQWUsZUFDQWIsR0FBQWMsZUFBQUMsTUFDQWQsRUFBQWUsT0FBQSxlQUNBakIsRUFBQWtCLEtBQUEsU0FHQUMsUUFBQSxtQkFBQSxhQUFBLEtBQUEsVUFBQSxTQUFBQyxFQUFBQyxFQUFBcEIsR0FDQSxPQUNBcUIsUUFBQSxTQUFBQyxHQUtBLE1BSkFBLEdBQUFDLFFBQUFELEVBQUFDLFlBQ0F2QixFQUFBYyxlQUFBQyxRQUNBTyxFQUFBQyxR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QUFILEVBQUExSCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG5cdCduZ1JvdXRlJyxcclxuXHQnTG9jYWxTdG9yYWdlTW9kdWxlJyxcclxuXHQndWlHbWFwZ29vZ2xlLW1hcHMnXHJcbl0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnRyb2xsZXIoJ0FwcGxpY2F0aW9uQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFVTRVJfUk9MRVMsIFVzZXJTdmMsICRsb2NhdGlvbiwgJHdpbmRvdywgbG9jYWxTdG9yYWdlU2VydmljZSkge1xyXG5cclxuXHRcdCRzY29wZS5jdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdjdXJyZW50VXNlcicpXHJcblx0XHQkc2NvcGUudXNlclJvbGVzID0gVVNFUl9ST0xFU1xyXG5cdFx0JHNjb3BlLmlzQXV0aG9yaXplZCA9IFVzZXJTdmMuaXNBdXRob3JpemVkXHJcblxyXG5cdFx0ICRzY29wZS5zZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcblx0XHQgXHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnY3VycmVudFVzZXInLCB1c2VyKTtcclxuXHRcdCBcdCRzY29wZS5jdXJyZW50VXNlciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdjdXJyZW50VXNlcicpXHJcblx0XHQgfVxyXG5cclxuXHRcdCRzY29wZS4kb24oJ2ZsYXNoJywgZnVuY3Rpb24gKF8sIG1lc3NhZ2UpIHtcclxuXHRcdFx0JHNjb3BlLmVyciA9IG1lc3NhZ2VcclxuXHRcdH0pXHJcblxyXG5cdFx0JHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JHNjb3BlLmN1cnJlbnRVc2VyID0gbnVsbFxyXG5cdFx0XHRVc2VyU3ZjLmxvZ291dCgpXHJcblx0XHRcdGRlbGV0ZSAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuXHJcblx0XHRcdGxvY2FsU3RvcmFnZVNlcnZpY2UucmVtb3ZlKCdjdXJyZW50VXNlcicpO1xyXG5cdFx0XHQkbG9jYXRpb24ucGF0aCgnLycpXHJcblx0XHR9XHJcblx0fSlcclxuXHQuZmFjdG9yeSgnYXV0aEludGVyY2VwdG9yJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCAkd2luZG93KSB7XHJcblx0ICByZXR1cm4ge1xyXG5cdCAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XHJcblx0ICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcclxuXHQgICAgICBpZiAoJHdpbmRvdy5zZXNzaW9uU3RvcmFnZS50b2tlbikge1xyXG5cdCAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIHJldHVybiBjb25maWc7XHJcblx0ICAgIH0sXHJcblx0ICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuXHQgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcclxuXHQgICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxyXG5cdCAgICAgIH1cclxuXHQgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XHJcblx0ICAgIH1cclxuXHQgIH07XHJcblx0fSlcclxuXHQuY29uZmlnKGZ1bmN0aW9uICgkaHR0cFByb3ZpZGVyLCBsb2NhbFN0b3JhZ2VTZXJ2aWNlUHJvdmlkZXIpIHtcclxuXHQgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xyXG5cdCAgbG9jYWxTdG9yYWdlU2VydmljZVByb3ZpZGVyLnNldFN0b3JhZ2VUeXBlKCdzZXNzaW9uU3RvcmFnZScpO1xyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnN0YW50KCdBVVRIX0VWRU5UUycsIHtcclxuXHQgIGxvZ2luU3VjY2VzczogJ2F1dGgtbG9naW4tc3VjY2VzcycsXHJcblx0ICBsb2dpbkZhaWxlZDogJ2F1dGgtbG9naW4tZmFpbGVkJyxcclxuXHQgIGxvZ291dFN1Y2Nlc3M6ICdhdXRoLWxvZ291dC1zdWNjZXNzJyxcclxuXHQgIHNlc3Npb25UaW1lb3V0OiAnYXV0aC1zZXNzaW9uLXRpbWVvdXQnLFxyXG5cdCAgbm90QXV0aGVudGljYXRlZDogJ2F1dGgtbm90LWF1dGhlbnRpY2F0ZWQnLFxyXG5cdCAgbm90QXV0aG9yaXplZDogJ2F1dGgtbm90LWF1dGhvcml6ZWQnXHJcblx0fSlcclxuXHQuY29uc3RhbnQoJ1VTRVJfUk9MRVMnLCB7XHJcblx0ICBhbGw6ICcqJyxcclxuXHQgIGFkbWluOiAnYWRtaW4nLFxyXG5cdCAgdXNlcjogJ3VzZXInLFxyXG5cdCAgZ3Vlc3Q6ICdndWVzdCdcclxuXHR9KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4gIC5jb250cm9sbGVyKCdDaGVja291dEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBPcmRlclN2YywgJGxvY2F0aW9uLCBPcmRlckZhY3RvcnksIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcclxuICBcdFx0JHNjb3BlLnNhdmUgPSBcIlwiXHJcbiAgICAgICAgJHNjb3BlLnNhdmVEID0gXCJcIlxyXG5cclxuICAgICAgICBPcmRlclN2Yy5mZXRjaE9uZShPcmRlckZhY3RvcnkuZ2V0KCkpXHJcbiAgICAgICAgXHQuc3VjY2VzcyhmdW5jdGlvbiAob3JkZXIpIHtcclxuICAgICAgICBcdFx0bG9jYWxTdG9yYWdlU2VydmljZS5zZXQoJ2N1cnJlbnRPcmRlcicsIG9yZGVyKVxyXG4gICAgICAgICAgICBcdCRzY29wZS5vcmRlciA9IGxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0KCdjdXJyZW50T3JkZXInKVxyXG4gICAgICAgICAgICAgICAgdmFyIGRpcyA9IHBhcnNlSW50KCRzY29wZS5vcmRlci5jYXNodG90YWwpICogMC45XHJcbiAgICAgICAgICAgICAgICBkaXMgPSBwYXJzZUludChkaXMpXHJcbiAgICAgICAgICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoJHNjb3BlLm9yZGVyLmNhc2h0b3RhbClcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2FuID0gKG51bSAtIGRpcykqNFxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRpc2NvdW50ID0gY2FuXHJcbiAgICAgICAgICAgICAgICBPcmRlclN2Yy5mZXRjaFVzZXIoJHNjb3BlLm9yZGVyLnVzZXJhY2NvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VyID0gdXNlclxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgXHR9KVxyXG4gICAgICAgIFx0LmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIFx0XHRsb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldCgnY3VycmVudE9yZGVyJywgbnVsbClcclxuICAgICAgICBcdFx0JGxvY2F0aW9uLnBhdGgoJy9vcmRlcicpXHJcbiAgICAgICAgXHR9KVxyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0Rpc2NvdW50ID0gZmFsc2VcclxuICAgICAgICAkc2NvcGUuc2hvd0Nhc2ggPSB0cnVlXHJcbiAgICAgICAgJHNjb3BlLnNob3dUZXh0ID0gXCLmipjmiaNcIlxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VEID0gMFxyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5ub3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93RGlzY291bnQgPSAhJHNjb3BlLnNob3dEaXNjb3VudFxyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd0Nhc2ggPSAhJHNjb3BlLnNob3dDYXNoXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5zaG93Q2FzaCl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1RleHQgPSBcIuaKmOaJo1wiXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNob3dUZXh0ID0gXCLnj77ph5FcIlxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUub3JkZXIuY2FzaHRvdGFsID0gJHNjb3BlLm9yZGVyLmNhc2h0b3RhbCAtICRzY29wZS5jaGFuZ2VEXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkID0gZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIFx0aWYobnVtID09PSAtMSl7XHJcbiAgICAgICAgXHRcdGlmKCRzY29wZS5zYXZlLmxlbmd0aCA9PT0gMSl7XHJcbiAgICAgICAgXHRcdFx0JHNjb3BlLnNhdmUgPSBcIlwiXHJcbiAgICAgICAgXHRcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdFx0dmFyIHRlbXBfc3RyID0gJHNjb3BlLnNhdmUuc3Vic3RyKDAsJHNjb3BlLnNhdmUubGVuZ3RoLTEpXHJcbiAgICAgICAgXHRcdFx0JHNjb3BlLnNhdmUgPSB0ZW1wX3N0clxyXG4gICAgICAgIFx0XHRcdC8vJHNjb3BlLnNhdmUubGVuZ3RoID0gJHNjb3BlLnNhdmUubGVuZ3RoLTFcclxuICAgICAgICBcdFx0XHQvL2FsZXJ0KCRzY29wZS5zYXZlLmxlbmd0aClcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fSBlbHNlIHtcclxuICAgICAgICBcdFx0JHNjb3BlLnNhdmUgPSAkc2NvcGUuc2F2ZSArIFwiXCIgKyBudW1cclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgXHQkc2NvcGUuY2hhbmdlID0gcGFyc2VJbnQoJHNjb3BlLnNhdmUgLSAkc2NvcGUub3JkZXIuY2FzaHRvdGFsKVxyXG5cclxuICAgICAgICBcdGlmKCRzY29wZS5zYXZlLmNoYXJBdCgwKSA9PT0gXCIwXCIpe1xyXG4gICAgICAgIFx0XHQkc2NvcGUuc2F2ZSA9IFwiXCJcclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgXHRpZigkc2NvcGUuc2F2ZS5sZW5ndGggPT09IDApe1xyXG4gICAgICAgIFx0XHQkc2NvcGUuY2hhbmdlID0gXCJcIlxyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0gXHJcbiAgICAgICAgJHNjb3BlLmFkZEQgPSBmdW5jdGlvbiAobnVtKSB7XHJcbiAgICAgICAgICAgIGlmKG51bSA9PT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNhdmVELmxlbmd0aCA9PT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVEID0gXCJcIlxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcF9zdHIgPSAkc2NvcGUuc2F2ZUQuc3Vic3RyKDAsJHNjb3BlLnNhdmVELmxlbmd0aC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zYXZlRCA9IHRlbXBfc3RyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuc2F2ZS5sZW5ndGggPSAkc2NvcGUuc2F2ZS5sZW5ndGgtMVxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoJHNjb3BlLnNhdmUubGVuZ3RoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnNhdmVEID0gJHNjb3BlLnNhdmVEICsgXCJcIiArIG51bVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuY2hhbmdlRCA9IHBhcnNlSW50KCRzY29wZS5zYXZlRCAvIDQpXHJcblxyXG4gICAgICAgICAgICBpZigkc2NvcGUuc2F2ZUQuY2hhckF0KDApID09PSBcIjBcIil7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2F2ZUQgPSBcIlwiXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5zYXZlRC5sZW5ndGggPT09IDApe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZUQgPSBcIlwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ICAgIFxyXG4gIH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgLmNvbnRyb2xsZXIoJ0NvbXBsZXRlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIENvbXBsZXRlU3ZjKSB7XHJcbiAgICBDb21wbGV0ZVN2Yy5mZXRjaFBlcnNvbmFsT3JkZXIoJHNjb3BlLmN1cnJlbnRVc2VyLnVzZXJhY2NvdW50KVxyXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChwZXJzb25hbE9yZGVyKSB7XHJcbiAgICAgICAgXHRmb3IodiBpbiBwZXJzb25hbE9yZGVyKXtcclxuICAgICAgICBcdFx0JHNjb3BlLnBlcnNvbmFsT3JkZXIgPSBwZXJzb25hbE9yZGVyW3ZdXHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjdXJyVGltZSA9IG5ldyBEYXRlKCRzY29wZS5wZXJzb25hbE9yZGVyLmRhdGUpO1xyXG4gICAgICAgICAgICBiID0gMzBcclxuICAgICAgICAgICAgY3VyclRpbWUuc2V0TWludXRlcyhjdXJyVGltZS5nZXRNaW51dGVzKCkgKyBiLCBjdXJyVGltZS5nZXRTZWNvbmRzKCksIDApO1xyXG4gICAgICAgICAgICAkc2NvcGUudGltZVBsdXMgPSBjdXJyVGltZVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpXHJcbiAgICAgICAgIH0pXHJcbiAgfSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHQuc2VydmljZSgnQ29tcGxldGVTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcclxuXHRcdHZhciBzdmMgPSB0aGlzXHJcblx0XHRzdmMuZmV0Y2hQZXJzb25hbE9yZGVyID0gZnVuY3Rpb24gKHVzZXJhY2NvdW50KSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcGVyc29uYWxfb3JkZXIvJyArIHVzZXJhY2NvdW50KVxyXG5cdFx0fVxyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnRyb2xsZXIoJ0xpc3RDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBPcmRlclN2YywgTWVudUZhY3RvcnkpIHtcclxuXHRcdCRzY29wZS5jYXJ0ID0gTWVudUZhY3RvcnkuZ2V0KClcclxuXHJcbiAgICAgICAgY2hlY2tDYXJ0KClcdFx0XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrQ2FydCgpe1xyXG4gICAgICAgICAgICBpZihpc0VtcHR5T2JqKCRzY29wZS5jYXJ0KSl7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL21lbnUnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iail7XHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aD9mYWxzZTp0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLm9yZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBPcmRlclN2Yy5vcmRlcigkc2NvcGUuY3VycmVudFVzZXIudXNlcmFjY291bnQsICRzY29wZS5jdXJyZW50VXNlci51c2VybmFtZSwgJHNjb3BlLmNhcnQsICRzY29wZS50b3RhbFByaWNlKCksICRzY29wZS5tYXJrKVxyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2NvbXBsZXRlJylcclxuICAgICAgICB9XHJcblxyXG5cdFx0Ly/oqIjnrpflkIjoqIjph5HpoY1cclxuICAgICAgICAkc2NvcGUudG90YWxQcmljZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY2FydCxmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IGl0ZW0ucHJpY2UgKiBpdGVtLnF1YW50aXR5O1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6KiI566X5ZWG5ZOB57i95pW4XHJcbiAgICAgICAgJHNjb3BlLnRvdGFsUXVhbnRpdHkgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgdG90YWxxID0gMDtcclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5jYXJ0LGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5xdWFudGl0eT09PScnfHxpdGVtLnF1YW50aXR5PT09bnVsbHx8aXRlbS5xdWFudGl0eTwwKXtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnF1YW50aXR5PTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0b3RhbHEgKz0gIHBhcnNlSW50KGl0ZW0ucXVhbnRpdHkpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWxxO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+aJvuWIsOe0ouW8lVxyXG4gICAgICAgIHZhciBmaW5kSW5kZXggPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY2FydCxmdW5jdGlvbihpdGVtLGtleSl7XHJcbiAgICAgICAgICAgICAgICBpZihpdGVtLmlkID09PSBpZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v56e76Zmk5pON5L2cXHJcbiAgICAgICAgJHNjb3BlLnJlbW92ZSA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0tMTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID1maW5kSW5kZXgoaWQpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNhcnQsZnVuY3Rpb24oaXRlbSxrZXkpe1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZihpbmRleCAhPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHJldHVybmtleSA9IGNvbmZpcm0oJ+aYr+WQpuW+nuizvOeJqei7iuS4reenu+mZpOipsuWVhuWTge+8nycpO1xyXG4gICAgICAgICAgICAgICAgaWYocmV0dXJua2V5KXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FydC5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hlY2tDYXJ0KClcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/muIXnqbrotK3nianovaZcclxuICAgICAgICAkc2NvcGUucmVtb3ZlQWxsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHJldHVybmtleSA9IGNvbmZpcm0oJ+aYr+WQpua4heepuuizvOeJqei7iu+8nycpO1xyXG4gICAgICAgICAgICBpZihyZXR1cm5rZXkpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmNhcnQgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjaGVja0NhcnQoKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+S4uuWVhuWTgea3u+WKoOi0reS5sOaVsOmHj1xyXG4gICAgICAgICRzY29wZS5xYWRkID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPS0xO1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPWZpbmRJbmRleChpZCk7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ICE9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2FydFtpbmRleF0ucXVhbnRpdHk9cGFyc2VJbnQoJHNjb3BlLmNhcnRbaW5kZXhdLnF1YW50aXR5KSsxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Li65ZWG5ZOB5YeP5bCR6LSt5Lmw5pWw6YePXHJcbiAgICAgICAgJHNjb3BlLnFyZWR1Y2UgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9LTE7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ZmluZEluZGV4KGlkKTtcclxuICAgICAgICAgICAgaWYoaW5kZXggIT09IC0xKXtcclxuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5jYXJ0W2luZGV4XS5xdWFudGl0eT4xKXtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2FydFtpbmRleF0ucXVhbnRpdHk9cGFyc2VJbnQoJHNjb3BlLmNhcnRbaW5kZXhdLnF1YW50aXR5KS0xO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZW1vdmUoaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHR9KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5jb250cm9sbGVyKCdNZW51Q3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgTWVudVN2YywgTWVudUZhY3RvcnkpIHtcclxuICAgICAgICBNZW51U3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAobWVudSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuY2FydCA9IG1lbnVcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRNZW51TGVuZ3RoIChtZW51cykge1xyXG4gICAgICAgICAgICB2YXIganNvbmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIHJ1biBpbiBtZW51cyl7XHJcbiAgICAgICAgICAgICAgICBqc29ubGVuZ3RoICsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBqc29ubGVuZ3RoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRUb0xpc3QgKG1lbnVzLCBsaXN0KSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGFkZCBpbiBtZW51cyl7XHJcbiAgICAgICAgICAgICAgICBpZihwYXJzZUludChtZW51c1thZGRdLnF1YW50aXR5KSAhPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC51bnNoaWZ0KG1lbnVzW2FkZF0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGlzdC5wb3AoKVxyXG4gICAgICAgICAgICBsaXN0LnBvcCgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUubmV4dFBhZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxpc3QgPSBbe30se31dXHJcbiAgICAgICAgICAgIGFkZFRvTGlzdCgkc2NvcGUuY2FydCwgJHNjb3BlLmxpc3QpXHJcbiAgICAgICAgICAgIE1lbnVGYWN0b3J5LnNldCgkc2NvcGUubGlzdClcclxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9saXN0JylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5ZCI6KiI6YeR6aGNXHJcbiAgICAgICAgLy8gJHNjb3BlLnRvdGFsUHJpY2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgIC8vICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNhcnQsZnVuY3Rpb24oaXRlbSl7XHJcbiAgICAgICAgLy8gICAgICAgICB0b3RhbCArPSBpdGVtLnByaWNlICogaXRlbS5xdWFudGl0eTtcclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvL+WVhuWTgee4veaVuFxyXG4gICAgICAgIC8vICRzY29wZS50b3RhbFF1YW50aXR5ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgICAgdmFyIHRvdGFscSA9IDA7XHJcbiAgICAgICAgLy8gICAgIGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuY2FydCxmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAvLyAgICAgICAgIGlmKGl0ZW0ucXVhbnRpdHk9PT0nJ3x8aXRlbS5xdWFudGl0eT09PW51bGx8fGl0ZW0ucXVhbnRpdHk8MCl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgaXRlbS5xdWFudGl0eT0xO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgdG90YWxxICs9ICBwYXJzZUludChpdGVtLnF1YW50aXR5KTtcclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvLyAgICAgcmV0dXJuIHRvdGFscTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy/mib7liLDntKLlvJVcclxuICAgICAgICB2YXIgZmluZEluZGV4ID0gZnVuY3Rpb24oaWQpe1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNhcnQsZnVuY3Rpb24oaXRlbSxrZXkpe1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5pZCA9PT0gaWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+enu+mZpOaTjeS9nFxyXG4gICAgICAgIC8vICRzY29wZS5yZW1vdmUgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgLy8gICAgIHZhciBpbmRleCA9LTE7XHJcbiAgICAgICAgLy8gICAgIHZhciBpbmRleCA9ZmluZEluZGV4KGlkKTtcclxuICAgICAgICAvLyAgICAgYW5ndWxhci5mb3JFYWNoKCRzY29wZS5jYXJ0LGZ1bmN0aW9uKGl0ZW0sa2V5KXtcclxuICAgICAgICAvLyAgICAgICAgIGlmKGl0ZW0uaWQgPT09IGlkKXtcclxuICAgICAgICAvLyAgICAgICAgICAgICBpbmRleCA9IGtleTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfSlcclxuICAgICAgICAvLyAgICAgaWYoaW5kZXggIT09IC0xKXtcclxuICAgICAgICAvLyAgICAgICAgIHZhciByZXR1cm5rZXkgPSBjb25maXJtKCfmmK/lkKbnp7vpmaTpgJnpoIXllYblk4HvvJ8nKTtcclxuICAgICAgICAvLyAgICAgICAgIGlmKHJldHVybmtleSl7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgJHNjb3BlLmNhcnQuc3BsaWNlKGluZGV4LDEpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8v5aKe5Yqg6LO86LK35pW46YePXHJcbiAgICAgICAgJHNjb3BlLnFhZGQgPSBmdW5jdGlvbihpZCl7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9LTE7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9ZmluZEluZGV4KGlkKTtcclxuICAgICAgICAgICAgaWYoaW5kZXggIT09IC0xKXtcclxuICAgICAgICAgICAgICAgICRzY29wZS5jYXJ0W2luZGV4XS5xdWFudGl0eT1wYXJzZUludCgkc2NvcGUuY2FydFtpbmRleF0ucXVhbnRpdHkpKzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/muJvlsJHos7zosrfmlbjph49cclxuICAgICAgICAkc2NvcGUucXJlZHVjZSA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0tMTtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID1maW5kSW5kZXgoaWQpO1xyXG4gICAgICAgICAgICBpZihpbmRleCAhPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgaWYoJHNjb3BlLmNhcnRbaW5kZXhdLnF1YW50aXR5PjApe1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jYXJ0W2luZGV4XS5xdWFudGl0eT1wYXJzZUludCgkc2NvcGUuY2FydFtpbmRleF0ucXVhbnRpdHkpLTE7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHR9KVxyXG4gICAgLmZhY3RvcnkoJ01lbnVGYWN0b3J5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgc2F2ZWREYXRhID0ge31cclxuICAgICAgICAgZnVuY3Rpb24gc2V0KGRhdGEpIHtcclxuICAgICAgICAgICBzYXZlZERhdGEgPSBkYXRhO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICAgIHJldHVybiBzYXZlZERhdGE7XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBzZXQ6IHNldCxcclxuICAgICAgICAgIGdldDogZ2V0XHJcbiAgICAgICAgIH1cclxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5zZXJ2aWNlKCdNZW51U3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XHJcblx0XHR2YXIgc3ZjID0gdGhpc1xyXG5cdFx0c3ZjLnVwbG9hZCA9IGZ1bmN0aW9uIChmaWxlLCBuYW1lLCBwcmljZSkge1xyXG5cdFx0XHR2YXIgZmQgPSBuZXcgRm9ybURhdGEoKVxyXG4gICAgICAgIFx0Ly8gZmQuYXBwZW5kKCdmaWxlJywgZmlsZSlcclxuICAgICAgICBcdC8vIGZkLmFwcGVuZCgnbmFtZScsIG5hbWUpXHJcbiAgICAgICAgXHQvLyBmZC5hcHBlbmQoJ3ByaWNlJywgcHJpY2UpXHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL21lbnUnLCBcclxuXHRcdFx0eyBmaWxlOiBmaWxlLCBuYW1lOiBuYW1lLCBwcmljZTogcHJpY2UgfSApXHJcblx0XHR9XHJcblxyXG5cdFx0c3ZjLmZldGNoID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lbnUnKVxyXG5cdFx0fVxyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnRyb2xsZXIoJ09yZGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIE9yZGVyU3ZjLCAkbG9jYXRpb24sIE9yZGVyRmFjdG9yeSkge1xyXG4gICAgICAgICRzY29wZS5jaGVja291dCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBPcmRlckZhY3Rvcnkuc2V0KGlkKVxyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2NoZWNrb3V0JylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE9yZGVyU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbiAob3JkZXJzKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5vcmRlcnMgPSBvcmRlcnNcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCd3czpuZXdfb3JkZXInLCBmdW5jdGlvbiAoXywgb3JkZXIpIHtcclxuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzLnB1c2gob3JkZXIpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuXHR9KVxyXG4gICAgLmZhY3RvcnkoJ09yZGVyRmFjdG9yeScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgdmFyIHNhdmVkRGF0YSA9IHt9XHJcbiAgICAgICAgIGZ1bmN0aW9uIHNldChkYXRhKSB7XHJcbiAgICAgICAgICAgc2F2ZWREYXRhID0gZGF0YTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgICByZXR1cm4gc2F2ZWREYXRhO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgc2V0OiBzZXQsXHJcbiAgICAgICAgICBnZXQ6IGdldFxyXG4gICAgICAgICB9XHJcbiAgICB9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHQuc2VydmljZSgnT3JkZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcclxuXHRcdHZhciBzdmMgPSB0aGlzXHJcblx0XHRzdmMub3JkZXIgPSBmdW5jdGlvbiAodXNlcmFjY291bnQsIHVzZXJuYW1lLCBvcmRlciwgY2FzaHRvdGFsLCBtYXJrKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL29yZGVyJywgeyBoZWFkZXJzOiB7J0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LCB1c2VyYWNjb3VudDp1c2VyYWNjb3VudCwgdXNlcm5hbWU6dXNlcm5hbWUsIG9yZGVyOiBvcmRlciwgY2FzaHRvdGFsOiBjYXNodG90YWwsIG1hcms6IG1hcmt9KVxyXG5cdFx0fVxyXG5cclxuXHRcdHN2Yy5mZXRjaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL29yZGVyJylcclxuXHRcdH1cclxuXHJcblx0XHRzdmMuZmV0Y2hPbmUgPSBmdW5jdGlvbihpZCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2NoZWNrb3V0LycgKyBpZClcclxuXHRcdH1cclxuXHJcblx0XHRzdmMuZmV0Y2hVc2VyID0gZnVuY3Rpb24odXNlcmFjY291bnQpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2hlY2tvdXQnLCB7IGhlYWRlcnM6IHsnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sIHVzZXJhY2NvdW50OnVzZXJhY2NvdW50fSlcclxuXHRcdH1cclxuXHR9KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5jb250cm9sbGVyKCdwZXJzb25hbEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBQZXJzb25hbFNWQykge1xyXG5cdFx0UGVyc29uYWxTVkMuZnRlY2hIaXN0b3J5UG9zaXRpb24oJHNjb3BlLmN1cnJlbnRVc2VyLnVzZXJhY2NvdW50KVxyXG5cdFx0XHQuc3VjY2VzcyhmdW5jdGlvbiAocG9zaXRpb25zKSB7XHJcblx0XHRcdFx0XHQkc2NvcGUucG9zaXRpb25zID0gcG9zaXRpb25zXHJcblx0XHRcdFx0XHRzZXREYXRlKClcclxuXHQgICAgICAgIFx0fSlcclxuXHQgICAgICAgIFx0LmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cclxuXHQgICAgICAgIFx0fSlcclxuXHRcdFBlcnNvbmFsU1ZDLmZ0ZWNoSGlzdG9yeU9yZGVyKCRzY29wZS5jdXJyZW50VXNlci51c2VyYWNjb3VudClcclxuXHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24gKG9yZGVycykge1xyXG5cdFx0XHRcdFx0JHNjb3BlLm9yZGVycyA9IG9yZGVyc1xyXG5cdCAgICAgICAgXHR9KVxyXG5cdCAgICAgICAgXHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XHJcblxyXG5cdCAgICAgICAgXHR9KVxyXG5cclxuXHQgICAgJHNjb3BlLnNob3dQb2ludCA9IGZhbHNlXHJcbiAgICAgICAgJHNjb3BlLnNob3dPcmRlciA9IGZhbHNlXHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5zaG93SGlzdG9yeVBvaW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd1BvaW50ID0gISRzY29wZS5zaG93UG9pbnRcclxuICAgICAgICAgICAgJHNjb3BlLnNob3dPcmRlciA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dIaXN0b3J5T3JkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5zaG93T3JkZXIgPSAhJHNjb3BlLnNob3dPcmRlclxyXG4gICAgICAgICAgICAkc2NvcGUuc2hvd1BvaW50ID0gZmFsc2VcclxuICAgICAgICB9ICAgICBcclxuXHJcblx0ICAgICRzY29wZS5jaGFuZ2UgPSBmdW5jdGlvbiAoa2V5KSB7XHJcblx0ICAgIFx0Ly9hbGVydChrZXkpXHJcblx0ICAgIFx0dmFyIGN1cnJEYXRlXHJcblx0ICAgIFx0dmFyIGN1cnJOZXh0RGF0ZVxyXG5cdCAgICBcdCRzY29wZS5tYXAuY2VudGVyID0ge2xhdGl0dWRlOiAkc2NvcGUubW9uZ29MYXRba2V5XSwgbG9uZ2l0dWRlOiAkc2NvcGUubW9uZ29Mb25ba2V5XX1cclxuXHQgICAgXHQkc2NvcGUucG9seWxpbmVzWzBdLnBhdGggPSBbXTtcclxuICAgIFx0XHRjdXJyRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5tb25nb0RhdGVba2V5XSk7XHJcbiAgICBcdFx0Y3VyckRhdGUgPSBjdXJyRGF0ZS50b0RhdGVTdHJpbmcoKVxyXG5cdCAgICBcdGZvcih2IGluICRzY29wZS5wb3NpdGlvbnMpe1xyXG5cdCAgICBcdFx0Y3Vyck5leHREYXRlID0gbmV3IERhdGUoJHNjb3BlLnBvc2l0aW9uc1t2XS5kYXRlKTtcclxuXHQgICAgXHRcdGN1cnJOZXh0RGF0ZSA9IGN1cnJOZXh0RGF0ZS50b0RhdGVTdHJpbmcoKVxyXG5cclxuXHQgICAgXHRcdGlmKGN1cnJOZXh0RGF0ZSA9PSBjdXJyRGF0ZSl7XHJcblx0ICAgIFx0XHRcdHZhciB0ZW1wID0gW3tsYXRpdHVkZTogJHNjb3BlLnBvc2l0aW9uc1t2XS5sYXRpdHVkZSwgbG9uZ2l0dWRlOiAkc2NvcGUucG9zaXRpb25zW3ZdLmxvbmdpdHVkZX1dXHJcblx0ICAgIFx0XHRcdCRzY29wZS5wb2x5bGluZXNbMF0ucGF0aC51bnNoaWZ0KHRlbXBbMF0pXHJcblxyXG5cdCAgICBcdFx0fVxyXG5cdCAgICBcdH1cclxuXHQgICAgfVxyXG5cclxuXHQgICAgZnVuY3Rpb24gc2V0RGF0ZSAoKSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gMFxyXG5cdCAgICBcdHZhciBjdXJyRGF0ZVxyXG5cdCAgICBcdHZhciBjdXJyTmV4dERhdGVcclxuXHRcdFx0JHNjb3BlLmRhdGUgPSBuZXcgQXJyYXkoKVxyXG5cdFx0XHQkc2NvcGUubW9uZ29EYXRlID0gW11cclxuXHRcdFx0JHNjb3BlLm1vbmdvTGF0ID0gW11cclxuXHRcdFx0JHNjb3BlLm1vbmdvTG9uID0gW11cclxuXHQgICAgXHRmb3IodiBpbiAkc2NvcGUucG9zaXRpb25zKXtcclxuXHQgICAgXHRcdGN1cnJEYXRlID0gbmV3IERhdGUoJHNjb3BlLnBvc2l0aW9uc1tpXS5kYXRlKTtcclxuXHQgICAgXHRcdGN1cnJEYXRlID0gY3VyckRhdGUudG9EYXRlU3RyaW5nKClcclxuXHJcblx0ICAgIFx0XHRjdXJyTmV4dERhdGUgPSBuZXcgRGF0ZSgkc2NvcGUucG9zaXRpb25zW3ZdLmRhdGUpO1xyXG5cdCAgICBcdFx0Y3Vyck5leHREYXRlID0gY3Vyck5leHREYXRlLnRvRGF0ZVN0cmluZygpXHJcblxyXG5cdCAgICBcdFx0aWYoIShjdXJyTmV4dERhdGUgPT0gY3VyckRhdGUpKXtcclxuXHQgICAgXHRcdFx0JHNjb3BlLmRhdGUudW5zaGlmdChjdXJyRGF0ZSlcclxuXHQgICAgXHRcdFx0JHNjb3BlLm1vbmdvRGF0ZS51bnNoaWZ0KCRzY29wZS5wb3NpdGlvbnNbaV0uZGF0ZSlcclxuXHQgICAgXHRcdFx0JHNjb3BlLm1vbmdvTGF0LnVuc2hpZnQoJHNjb3BlLnBvc2l0aW9uc1tpXS5sYXRpdHVkZSlcclxuXHQgICAgXHRcdFx0JHNjb3BlLm1vbmdvTG9uLnVuc2hpZnQoJHNjb3BlLnBvc2l0aW9uc1tpXS5sb25naXR1ZGUpXHJcblx0ICAgIFx0XHRcdGkgPSB2XHJcblx0XHQgICAgXHRcdGN1cnJEYXRlID0gbmV3IERhdGUoJHNjb3BlLnBvc2l0aW9uc1tpXS5kYXRlKTtcclxuXHRcdCAgICBcdFx0Y3VyckRhdGUgPSBjdXJyRGF0ZS50b0RhdGVTdHJpbmcoKVxyXG5cdCAgICBcdFx0fVxyXG5cdCAgICBcdH1cclxuXHQgICAgXHRjdXJyRGF0ZSA9IG5ldyBEYXRlKCRzY29wZS5wb3NpdGlvbnNbaV0uZGF0ZSk7XHJcblx0ICAgIFx0JHNjb3BlLmRhdGUudW5zaGlmdChjdXJyRGF0ZSlcclxuXHQgICAgXHQkc2NvcGUubW9uZ29EYXRlLnVuc2hpZnQoJHNjb3BlLnBvc2l0aW9uc1tpXS5kYXRlKVxyXG5cdFx0XHQkc2NvcGUubW9uZ29MYXQudW5zaGlmdCgkc2NvcGUucG9zaXRpb25zW2ldLmxhdGl0dWRlKVxyXG5cdFx0XHQkc2NvcGUubW9uZ29Mb24udW5zaGlmdCgkc2NvcGUucG9zaXRpb25zW2ldLmxvbmdpdHVkZSlcclxuICAgICAgICB9XHJcblxyXG5cdFx0JHNjb3BlLm1hcCA9IHtjZW50ZXI6IHtsYXRpdHVkZTogMjUuMDg2NTU3LCBsb25naXR1ZGU6IDEyMS41NjU0ODggfSwgem9vbTogMTcsIGJvdW5kczoge319O1xyXG4gICAgICAgICRzY29wZS5wb2x5bGluZXMgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkOiAxLFxyXG4gICAgICAgICAgICAgICAgcGF0aDogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IDI1LjA4NjUxOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiAxMjEuNTY0MDQwXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiAyNS4wODY1NTcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogMTIxLjU2NTQ4OFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM2MDYwRkInLFxyXG4gICAgICAgICAgICAgICAgICAgIHdlaWdodDogM1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZ2VvZGVzaWM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaWNvbnM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBnb29nbGUubWFwcy5TeW1ib2xQYXRoLkJBQ0tXQVJEX09QRU5fQVJST1dcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogJzI1cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdDogJzUwcHgnXHJcbiAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG5cdH0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5zZXJ2aWNlKCdQZXJzb25hbFNWQycsIGZ1bmN0aW9uICgkaHR0cCkge1xyXG5cdFx0dmFyIHN2YyA9IHRoaXNcclxuXHRcdHN2Yy5mdGVjaEhpc3RvcnlQb3NpdGlvbiA9IGZ1bmN0aW9uICh1c2VyYWNjb3VudCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2hpc3RvcnlfcG9zaXRpb24vJyArIHVzZXJhY2NvdW50KVxyXG5cdFx0fVxyXG5cdFx0c3ZjLmZ0ZWNoSGlzdG9yeU9yZGVyID0gZnVuY3Rpb24gKHVzZXJhY2NvdW50KSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvaGlzdG9yeV9vcmRlci8nICsgdXNlcmFjY291bnQpXHJcblx0XHR9XHJcblx0fSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHQuY29udHJvbGxlcignUG9zdHNDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgUG9zdHNTdmMsIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcclxuXHRcdCRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRpZiAoJHNjb3BlLnBvc3RCb2R5KSB7XHJcblx0XHRcdFx0UG9zdHNTdmMuY3JlYXRlKHtcclxuXHRcdFx0XHRcdHVzZXJuYW1lOiBsb2NhbFN0b3JhZ2VTZXJ2aWNlLmdldCgnY3VycmVudFVzZXInKS51c2VybmFtZSxcclxuXHRcdFx0XHRcdGJvZHk6ICRzY29wZS5wb3N0Qm9keVxyXG5cdFx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3QpIHtcclxuXHRcdFx0XHRcdC8vJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdClcclxuXHRcdFx0XHRcdCRzY29wZS5wb3N0Qm9keSA9IG51bGxcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0UG9zdHNTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0cykge1xyXG5cdFx0XHQkc2NvcGUucG9zdHMgPSBwb3N0c1xyXG5cdFx0fSlcclxuXHJcblx0XHQkc2NvcGUuJG9uKCd3czpuZXdfcG9zdCcsIGZ1bmN0aW9uIChfLCBwb3N0KSB7XHJcblx0XHRcdCRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpXHJcblx0XHRcdH0pXHJcblx0XHR9KVxyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LnNlcnZpY2UoJ1Bvc3RzU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XHJcblx0XHR0aGlzLmZldGNoID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJylcclxuXHRcdH1cclxuXHRcdHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHBvc3QpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KVxyXG5cdFx0fVxyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcblx0XHQkcm91dGVQcm92aWRlclxyXG5cdFx0XHQud2hlbignLycsIHsgY29udHJvbGxlcjogJycsIHRlbXBsYXRlVXJsOiAnY2FyYm9uZm9vdHByaW50Lmh0bWwnIH0pXHJcblx0XHRcdC53aGVuKCcvcmVnaXN0ZXInLCB7IGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsIHRlbXBsYXRlVXJsOiAncmVnaXN0ZXIuaHRtbCcgfSlcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHsgY29udHJvbGxlcjogJ1VzZXJDdHJsJywgdGVtcGxhdGVVcmw6ICdsb2dpbi5odG1sJ30pXHJcblx0XHRcdC53aGVuKCcvcG9zdHMnLCB7IGNvbnRyb2xsZXI6ICdQb3N0c0N0cmwnLCB0ZW1wbGF0ZVVybDogJ3Bvc3RzLmh0bWwnfSlcclxuXHRcdFx0LndoZW4oJy9tZW51Jywge2NvbnRyb2xsZXI6ICdNZW51Q3RybCcsIHRlbXBsYXRlVXJsOiAnbWVudS5odG1sJ30pXHJcblx0XHRcdC53aGVuKCcvbWVudWxpc3QnLCB7Y29udHJvbGxlcjogJ01lbnVDdHJsJywgdGVtcGxhdGVVcmw6ICdtZW51bGlzdC5odG1sJ30pXHJcblx0XHRcdC53aGVuKCcvbGlzdCcsIHtjb250cm9sbGVyOiAnTGlzdEN0cmwnLCB0ZW1wbGF0ZVVybDogJ2xpc3QuaHRtbCd9KVxyXG5cdFx0XHQud2hlbignL3BlcnNvbmFsJywge2NvbnRyb2xsZXI6ICdwZXJzb25hbEN0cmwnLCB0ZW1wbGF0ZVVybDogJ3BlcnNvbmFsLmh0bWwnfSlcclxuXHRcdFx0LndoZW4oJy9lZGl0Jywge2NvbnRyb2xsZXI6ICdVcGxvYWRDdHJsJywgdGVtcGxhdGVVcmw6ICdlZGl0Lmh0bWwnfSlcclxuXHRcdFx0LndoZW4oJy9vcmRlcicsIHtjb250cm9sbGVyOiAnT3JkZXJDdHJsJywgdGVtcGxhdGVVcmw6ICdvcmRlci5odG1sJ30pXHJcblx0XHRcdC53aGVuKCcvY2hlY2tvdXQnLCB7Y29udHJvbGxlcjogJ0NoZWNrb3V0Q3RybCcsIHRlbXBsYXRlVXJsOiAnY2hlY2tvdXQuaHRtbCd9KVxyXG5cdFx0XHQud2hlbignL2NvbXBsZXRlJywge2NvbnRyb2xsZXI6ICdDb21wbGV0ZUN0cmwnLCB0ZW1wbGF0ZVVybDogJ2NvbXBsZXRlLmh0bWwnfSlcclxuXHRcdFx0Lm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvJyB9KTtcclxuXHRcdCRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKVxyXG5cdH0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnRyb2xsZXIoJ1VwbG9hZEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBNZW51U3ZjLCAkbG9jYXRpb24pIHtcclxuXHRcdCRzY29wZS51cGxvYWQgPSBmdW5jdGlvbiAobmFtZSwgcHJpY2UpIHtcclxuXHRcdFx0dmFyIGZpbGUgPSAkc2NvcGUuaW1hZ2VcclxuXHRcdFx0TWVudVN2Yy51cGxvYWQoZmlsZSwgbmFtZSwgcHJpY2UpXHJcblx0XHR9XHJcblx0fSlcclxuXHQuZGlyZWN0aXZlKCdmaWxlTW9kZWwnLCBbJyRwYXJzZScsIGZ1bmN0aW9uICgkcGFyc2UpIHtcclxuXHRyZXR1cm4ge1xyXG5cdCAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuXHQgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG5cdCAgICAgICAgICAgIHZhciBtb2RlbCA9ICRwYXJzZShhdHRycy5maWxlTW9kZWwpO1xyXG5cdCAgICAgICAgICAgIHZhciBtb2RlbFNldHRlciA9IG1vZGVsLmFzc2lnbjtcclxuXHQgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICBlbGVtZW50LmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xyXG5cdCAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0ZXIoc2NvcGUsIGVsZW1lbnRbMF0uZmlsZXNbMF0pO1xyXG5cdCAgICAgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHR9XSk7ICAgICIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5jb250cm9sbGVyKCdVc2VyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsIEFVVEhfRVZFTlRTLCAkbG9jYXRpb24sIFVzZXJTdmMpIHtcclxuXHRcdCRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICh1c2VyYWNjb3VudCwgcGFzc3dvcmQpIHtcclxuXHRcdFx0VXNlclN2Yy5sb2dpbih1c2VyYWNjb3VudCwgcGFzc3dvcmQpXHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoQVVUSF9FVkVOVFMubG9naW5TdWNjZXNzKTtcclxuXHRcdFx0XHRcdCRzY29wZS5zZXRDdXJyZW50VXNlcihyZXNwb25zZS5kYXRhKVxyXG5cdFx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0fVxyXG5cclxuXHRcdCRzY29wZS5jaGVja2JveF9jaGVja2VkID0gMDtcclxuXHRcdCRzY29wZS5wYXNzd29yZGNrID0gXCJcIjtcclxuXHRcdCRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgdXNlcmFjY291bnQsIHBhc3N3b3JkLCBzZXgsIHBob25lLCBlbWFpbCwgYWRkcmVzcywgYm9ybikge1xyXG5cdFx0XHRVc2VyU3ZjLmNyZWF0ZVVzZXIodXNlcm5hbWUsIHVzZXJhY2NvdW50LCBwYXNzd29yZCwgc2V4LCBwaG9uZSwgZW1haWwsIGFkZHJlc3MsIGJvcm4pXHJcblx0XHRcdFx0LmVycm9yKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cdFx0XHRcdFx0JHNjb3BlLiRlbWl0KCdmbGFzaCcsIHJlc3BvbnNlKVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0JHNjb3BlLmxvZ2luKHVzZXJhY2NvdW50LCBwYXNzd29yZCk7XHJcblx0XHRcdFx0fSlcclxuXHRcdH1cclxuXHR9KVxyXG5cdC5kaXJlY3RpdmUoJ3Bhc3N3b3JkTWF0Y2gnLCBbZnVuY3Rpb24gKCkge1xyXG5cdCAgICByZXR1cm4ge1xyXG5cdCAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuXHQgICAgICAgIHNjb3BlOnRydWUsXHJcblx0ICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0gLCBhdHRycywgY29udHJvbCkge1xyXG5cdCAgICAgICAgICAgIHZhciBjaGVja2VyID0gZnVuY3Rpb24gKCkge1xyXG5cdCBcclxuXHQgICAgICAgICAgICAgICAgLy9nZXQgdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBwYXNzd29yZFxyXG5cdCAgICAgICAgICAgICAgICB2YXIgZTEgPSBzY29wZS4kZXZhbChhdHRycy5uZ01vZGVsKTsgXHJcblx0IFxyXG5cdCAgICAgICAgICAgICAgICAvL2dldCB0aGUgdmFsdWUgb2YgdGhlIG90aGVyIHBhc3N3b3JkICBcclxuXHQgICAgICAgICAgICAgICAgdmFyIGUyID0gc2NvcGUuJGV2YWwoYXR0cnMucGFzc3dvcmRNYXRjaCk7XHJcblx0ICAgICAgICAgICAgICAgIHJldHVybiBlMSA9PSBlMjtcclxuXHQgICAgICAgICAgICB9O1xyXG5cdCAgICAgICAgICAgIHNjb3BlLiR3YXRjaChjaGVja2VyLCBmdW5jdGlvbiAobikge1xyXG5cdCBcclxuXHQgICAgICAgICAgICAgICAgLy9zZXQgdGhlIGZvcm0gY29udHJvbCB0byB2YWxpZCBpZiBib3RoIFxyXG5cdCAgICAgICAgICAgICAgICAvL3Bhc3N3b3JkcyBhcmUgdGhlIHNhbWUsIGVsc2UgaW52YWxpZFxyXG5cdCAgICAgICAgICAgICAgICBjb250cm9sLiRzZXRWYWxpZGl0eShcInVuaXF1ZVwiLCBuKTtcclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgfTtcclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbiAoJGh0dHAsICR3aW5kb3csIGxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcclxuXHRcdHZhciBzdmMgPSB0aGlzXHJcblx0XHRzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpXHJcblx0XHR9XHJcblx0XHRzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcmFjY291bnQsIHBhc3N3b3JkKSB7XHJcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJywge1xyXG5cdFx0XHRcdHVzZXJhY2NvdW50OiB1c2VyYWNjb3VudCwgcGFzc3dvcmQ6IHBhc3N3b3JkXHJcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xyXG5cdFx0XHRcdHN2Yy50b2tlbiA9IHZhbC5kYXRhXHJcblx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHZhbC5kYXRhXHJcblx0XHRcdFx0JHdpbmRvdy5zZXNzaW9uU3RvcmFnZS50b2tlbiA9IHZhbC5kYXRhXHJcblx0XHRcdFx0cmV0dXJuIHN2Yy5nZXRVc2VyKClcclxuXHRcdFx0fSlcclxuXHRcdH1cclxuXHJcblx0XHRzdmMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJydcclxuXHRcdH1cclxuXHJcblx0XHRzdmMuY3JlYXRlVXNlciA9IGZ1bmN0aW9uICh1c2VybmFtZSwgdXNlcmFjY291bnQsIHBhc3N3b3JkLCBzZXgsIHBob25lLCBlbWFpbCwgYWRkcmVzcywgYm9ybikge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHtcclxuXHRcdFx0XHR1c2VybmFtZTogdXNlcm5hbWUsIHVzZXJhY2NvdW50OiB1c2VyYWNjb3VudCwgcGFzc3dvcmQ6IHBhc3N3b3JkLCBzZXg6IHNleCwgcGhvbmU6IHBob25lLCBlbWFpbDogZW1haWwsIGFkZHJlc3M6YWRkcmVzcywgYm9ybjpib3JuXHJcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHZhbCkge1xyXG5cclxuXHRcdFx0fSkuZXJyb3IoZnVuY3Rpb24gKHZhbCkge1xyXG5cdFx0XHRcdHN2Yy5lcnIgPSB2YWxcclxuXHRcdFx0XHRyZXR1cm4gc3ZjLmVyclxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cclxuXHRcdHN2Yy5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgcmV0dXJuICEhbG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2N1cnJlbnRVc2VyJylcclxuXHRcdH1cclxuXHJcblx0XHRzdmMuaXNBdXRob3JpemVkID0gZnVuY3Rpb24gKGF1dGhvcml6ZWRSb2xlcykge1xyXG5cdFx0ICAgIGlmICghYW5ndWxhci5pc0FycmF5KGF1dGhvcml6ZWRSb2xlcykpIHtcclxuXHRcdCAgICAgIGF1dGhvcml6ZWRSb2xlcyA9IFthdXRob3JpemVkUm9sZXNdO1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgICByZXR1cm4gKHN2Yy5pc0F1dGhlbnRpY2F0ZWQoKSAmJlxyXG5cdFx0ICAgICAgYXV0aG9yaXplZFJvbGVzLmluZGV4T2YobG9jYWxTdG9yYWdlU2VydmljZS5nZXQoJ2N1cnJlbnRVc2VyJykuYXV0aCkgIT09IC0xKTtcclxuXHRcdH1cclxuXHR9KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcclxuXHRcdHZhciB1cmwgPSAnd3NzOi8vbG9jYWxob3N0OjMwMTEnXHJcblx0XHR2YXIgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQodXJsKVxyXG5cdFx0XHJcblx0XHRjb25uZWN0aW9uLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0ZWQnKVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbm5lY3Rpb24ub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coZSlcclxuXHRcdFx0dmFyIHBheWxvYWQgPSBKU09OLnBhcnNlKGUuZGF0YSlcclxuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50b3BpYywgcGF5bG9hZC5kYXRhKVxyXG5cdFx0fVxyXG5cdH0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9